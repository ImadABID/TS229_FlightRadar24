function temp_delay = Estimation_time_delay(rl, sp, temp_delay_max)
    
    sp_len = length(sp);  
    I1 = ssum(
    cor = zeros(1, temp_delay_max);
    
    for k=1:temp_delay_max    
        cor(k) =  mean(abs(xcorr(rl(k + 1:k + sp_len), sp, temp_delay_max, 'coeff')));
    end
    [~, temp_delay] = max(cor);
    
end